--- origsrc/freetds-0.82/configure.ac	2008-05-07 17:57:52.000000000 -0500
+++ src/freetds-0.82/configure.ac	2008-05-14 23:18:27.921875000 -0500
@@ -354,7 +354,7 @@
 AC_C_CONST
 
 case $host_os in
-mingw*)
+cygwin*|mingw*)
 	FREETDS_SYMBOLIC="-no-undefined"
 	;;
 hpux* | linux* | solaris*)
--- origsrc/freetds-0.82/src/ctlib/Makefile.am	2007-11-22 02:44:54.000000000 -0600
+++ src/freetds-0.82/src/ctlib/Makefile.am	2008-05-15 06:27:01.593750000 -0500
@@ -18,5 +18,5 @@
 endif
 libct_la_LDFLAGS=	-version-info 4:0:0 $(SYMBOLS) $(FREETDS_SYMBOLIC)
 
-libct_la_LIBADD	=	../tds/libtds.la ../replacements/libreplacements.la $(NETWORK_LIBS) $(LIBICONV) $(FREETDS_LIBGCC)
+libct_la_LIBADD	=	../tds/libtds.la ../replacements/libreplacements.la $(NETWORK_LIBS) $(LTLIBICONV) $(FREETDS_LIBGCC)
 
--- origsrc/freetds-0.82/src/dblib/Makefile.am	2007-11-22 02:44:54.000000000 -0600
+++ src/freetds-0.82/src/dblib/Makefile.am	2008-05-15 06:28:24.671875000 -0500
@@ -20,5 +20,5 @@
 SYMBOLS		=	-export-symbols-regex '^(db|bcp_|tdsdump_open|tdsdbopen|.*_xact|close_commit|open_commit|.?asprintf).*'
 endif
 libsybdb_la_LDFLAGS=	-version-info 5:0:0 $(SYMBOLS) $(FREETDS_SYMBOLIC)
-libsybdb_la_LIBADD=	../tds/libtds.la ../replacements/libreplacements.la $(NETWORK_LIBS) $(LIBICONV) $(FREETDS_LIBGCC)
+libsybdb_la_LIBADD=	../tds/libtds.la ../replacements/libreplacements.la $(NETWORK_LIBS) $(LTLIBICONV) $(FREETDS_LIBGCC)
 
--- origsrc/freetds-0.82/src/odbc/Makefile.am	2007-12-03 12:55:09.000000000 -0600
+++ src/freetds-0.82/src/odbc/Makefile.am	2008-05-15 06:28:41.218750000 -0500
@@ -20,7 +20,7 @@
 .rc.res:
 	$(RC) -i $< --input-format=rc -o $@ -O coff
 else
-libtdsodbc_la_LIBADD=	../tds/libtds.la ../replacements/libreplacements.la $(ODBCINSTLIB) $(NETWORK_LIBS) $(LIBICONV) $(FREETDS_LIBGCC)
+libtdsodbc_la_LIBADD=	../tds/libtds.la ../replacements/libreplacements.la $(ODBCINSTLIB) $(NETWORK_LIBS) $(LTLIBICONV) $(FREETDS_LIBGCC)
 if MACOSX
 SYMBOLS		=
 else
--- origsrc/freetds-0.82/src/server/Makefile.am	2007-03-12 08:28:51.000000000 -0500
+++ src/freetds-0.82/src/server/Makefile.am	2008-05-15 06:28:56.093750000 -0500
@@ -2,7 +2,7 @@
 AM_CPPFLAGS	=	-I$(top_srcdir)/include
 noinst_LTLIBRARIES	=	libtdssrv.la
 libtdssrv_la_SOURCES=	query.c server.c login.c
-libtdssrv_la_LIBADD =	../tds/libtds.la ../replacements/libreplacements.la $(NETWORK_LIBS) $(LIBICONV) $(FREETDS_LIBGCC)
+libtdssrv_la_LIBADD =	../tds/libtds.la ../replacements/libreplacements.la $(NETWORK_LIBS) $(LTLIBICONV) $(FREETDS_LIBGCC)
 noinst_PROGRAMS	= tdssrv
 tdssrv_LDADD	= libtdssrv.la $(NETWORK_LIBS)
 tdssrv_SOURCES	= unittest.c
--- origsrc/freetds-0.82/src/tds/Makefile.am	2007-10-30 10:51:06.000000000 -0500
+++ src/freetds-0.82/src/tds/Makefile.am	2008-05-15 06:33:54.968750000 -0500
@@ -1,6 +1,6 @@
 # $Id: freetds-0.82-1.src.patch,v 1.1 2008-05-15 21:10:57 yselkowitz Exp $
 
-SUBDIRS			=	unittests
+SUBDIRS			=	. unittests
 AM_CPPFLAGS		=	-I$(top_srcdir)/include
 
 noinst_LTLIBRARIES	=	libtds.la
@@ -11,7 +11,7 @@
 	tds_checks.c tds_checks.h enum_cap.h log.c \
 	gssapi.c
 libtds_la_LDFLAGS=
-libtds_la_LIBADD=
+libtds_la_LIBADD= $(LTLIBICONV)
 
 noinst_HEADERS		= tds_willconvert.h encodings.h num_limits.h
 EXTRA_DIST		= tds_willconvert.h encodings.h num_limits.h
